<?xml version="1.0" encoding="utf-8"?>
<UserControl
    x:Class="KFP.SubscriptionFrame"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:KFP"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:controls="using:Microsoft.UI.Xaml.Controls"
    xmlns:wv2="using:Microsoft.UI.Xaml.Controls"
    mc:Ignorable="d">

    <Grid x:Name="RootGrid" Background="White" Padding="20">
        <Grid x:Name="ChoiceGrid">
            <!-- LOADING GRID -->
            <Grid x:Name="LoadingGrid" Visibility="Collapsed"
              VerticalAlignment="Center" HorizontalAlignment="Center">
                <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Spacing="12">
                    <TextBlock x:Name="LoadingText"
                           Text="Loading..."
                           FontSize="20"
                           HorizontalAlignment="Center" />
                    <ProgressRing x:Name="LoadingRing"
                              IsActive="True"
                              Width="50" Height="50"
                              HorizontalAlignment="Center"/>
                </StackPanel>
            </Grid>

            <!-- ERROR GRID -->
            <Grid x:Name="ErrorGrid" Visibility="Collapsed"
              VerticalAlignment="Center" HorizontalAlignment="Center">
                <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Spacing="16">

                    <!-- Error messages -->
                    <TextBlock x:Name="NoNetworkErrorText"
                           Text="No network connection. Please check your connection."
                           Foreground="Red"
                           FontSize="18"
                           TextAlignment="Center"
                           Visibility="Collapsed"/>
                    <TextBlock x:Name="CantReachServerErrorText"
                           Text="Unable to reach the server. Please try again later."
                           Foreground="Red"
                           FontSize="18"
                           TextAlignment="Center"
                           Visibility="Visible"/>

                    <!-- Buttons -->
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Spacing="20">
                        <Button x:Name="RetryButton" Content="Retry" Width="120" Height="40"/>
                        <Button x:Name="CancelExitButton1" Content="Cancel and Exit" Width="160" Height="40"/>
                    </StackPanel>
                </StackPanel>
            </Grid>

            <!-- SUBSCRIPTION GRID -->
            <Grid x:Name="SubscriptionGrid" Visibility="Visible">
                <ScrollViewer>
                    <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Spacing="20">

                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,0,30,25">
                            <Image Source="ms-appx:///Assets/Images/Logo/StoreLogo.png" HorizontalAlignment="Center" Stretch="UniformToFill" Height="60" Width="60" Margin="0,0,30,0"/>
                            <StackPanel Orientation="Vertical" VerticalAlignment="Center">
                                <TextBlock FontSize="24" FontWeight="Bold" HorizontalAlignment="Center"> Kiober</TextBlock>
                                <TextBlock FontSize="16" FontWeight="SemiBold" HorizontalAlignment="Center" Text="Get Started with Kiober Food POS"/>
                                <TextBlock HorizontalAlignment="Center">
                                Manage orders, payments, and menus — all in one place.
                                </TextBlock>
                                <TextBlock HorizontalAlignment="Center">
                                Start your free trial or subscribe to unlock full access.
                                </TextBlock>
                            </StackPanel>
                        </StackPanel>

                        <!-- Main actions -->
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Spacing="30">
                            <Button x:Name="StartTrialButton" BorderBrush="Green" VerticalContentAlignment="Top"
                            Width="400" Height="180">
                                <StackPanel HorizontalAlignment="Center">
                                    <TextBlock FontSize="18" FontWeight="SemiBold" HorizontalAlignment="Center" Margin="0,30,0,20" >Start Free Trial</TextBlock>
                                    <TextBlock TextWrapping="Wrap" HorizontalAlignment="Center">Try all features free for 14 days.</TextBlock>
                                    <TextBlock TextWrapping="Wrap" HorizontalAlignment="Center" TextAlignment="Center">When your trial ends, simply subscribe to keep your business running smoothly.</TextBlock>
                                    <TextBlock HorizontalAlignment="Center">No Credit Card Required.</TextBlock>
                                </StackPanel>
                            </Button>
                            <Button x:Name="BuySubscriptionButton" BorderBrush="Green" VerticalContentAlignment="Top" Click="BuySubscriptionButton_Click"
                            Width="400" Height="180">
                                <StackPanel HorizontalAlignment="Center">
                                    <TextBlock HorizontalAlignment="Center" FontSize="18" FontWeight="SemiBold" Margin="0,30,0,20">Buy Subscription</TextBlock>
                                    <TextBlock TextWrapping="Wrap" HorizontalAlignment="Center" TextAlignment="Center">This is a one-time subscription. Your payment will not auto-renew, and your credit card details are never stored. No hidden fees. You’ll receive a reminder before your subscription expires.</TextBlock>
                                </StackPanel>
                            </Button>
                        </StackPanel>

                        <!-- Small cancel button -->

                        <TextBlock TextWrapping="Wrap" HorizontalAlignment="Center"  Height="40">
                        <Run Text="By continuing, you agree to our " />
                        <Hyperlink Click="TermsLink_Click">Terms of Service</Hyperlink>
                        <Run Text=" and " />
                        <Hyperlink Click="PrivacyLink_Click">Privacy Policy</Hyperlink>
                        <Run Text="." />
                        </TextBlock>

                        <HyperlinkButton x:Name="CancelExitButton2" HorizontalAlignment="Center"
    Content="Cancel and Exit"
    Width="160" Height="40"
    Margin="0,10,0,20"/>

                    </StackPanel>
                </ScrollViewer>
            </Grid>
        </Grid>
        <!-- WebView for checkout -->
        <Border x:Name="BuySubscriptionBorder" Visibility="Collapsed"/>
    </Grid>
</UserControl>
