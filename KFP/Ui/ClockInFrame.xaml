<?xml version="1.0" encoding="utf-8"?>
<UserControl
    x:Class="KFP.Ui.ClockInFrame"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:KFP.Ui"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:controls="using:CommunityToolkit.WinUI.Controls"
    xmlns:data="using:KFP.DATA"
    xmlns:converters="using:KFP.Converters" xmlns:custom="using:KFP.Ui.Components"
    mc:Ignorable="d">

    <UserControl.Resources>
        <Style TargetType="Button">
            <Setter Property="Width" Value="70"/>
            <Setter Property="Height" Value="60"/>
            <Setter Property="FontSize" Value="20"/>
            <Setter Property="FocusVisualPrimaryBrush" Value="{StaticResource SystemAccentColorLight3}"/>
        </Style>
        <converters:AvatarCodeToImageSourceConverter x:Key="avatarConverter"/>
        <DataTemplate x:DataType="data:AppUser" x:Key="userTemplate">
            <Border BorderBrush="{StaticResource SystemAccentColorLight3}" BorderThickness="1" Margin="0,0,0,0" CornerRadius="4">
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Width="240">
                    <Image Width="55" Height="55"  Margin="3,3,30,3" Source="{x:Bind avatarCode, Converter={StaticResource avatarConverter}}"/>
                    <TextBlock Text="{x:Bind UserName}" FontWeight="SemiBold" VerticalAlignment="Center" HorizontalAlignment="Center"></TextBlock>
                </StackPanel>
            </Border>
        </DataTemplate>

        <Storyboard x:Name="HideSelectedUserStoryboard">
            <FadeOutThemeAnimation Storyboard.TargetName="selectedUserPanel" />
        </Storyboard>
        <Storyboard x:Name="ShowSelectedUserStoryboard">
            <FadeInThemeAnimation Storyboard.TargetName="selectedUserPanel" />
        </Storyboard>
    </UserControl.Resources>

    <ScrollViewer>

        <StackPanel HorizontalAlignment="Center" Width="562"  Margin="0,15,0,15">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,0,30,25">
                <Image Source="ms-appx:///Assets/Images/Logo/StoreLogo.png" HorizontalAlignment="Center" Stretch="UniformToFill" Height="60" Width="60" Margin="0,0,30,0"/>
                <StackPanel Orientation="Vertical" VerticalAlignment="Center">
                    <TextBlock FontSize="24" FontWeight="Bold" HorizontalAlignment="Center"> Kiober</TextBlock>
                    <TextBlock FontSize="18" FontWeight="Normal" HorizontalAlignment="Center" x:Uid="LoginTextBlock"/>
                </StackPanel>
            </StackPanel>


            <StackPanel  Margin="0,20,0,0"  Orientation="Vertical" x:Name="selectUserPanel">
                <TextBlock Margin="0,0,0,10" x:Uid="select_user" FontSize="20"  HorizontalAlignment="Center"/>
                <ListView x:Name="UsersListView" ItemsSource="{x:Bind Path=AppUsers}" SelectedItem="{x:Bind Path=selectedUser, Mode=TwoWay}"
                          HorizontalContentAlignment="Center"
                          ItemTemplate="{StaticResource userTemplate}">
                    <ListView.ItemContainerStyle>
                        <Style TargetType="ListViewItem">
                            <Setter Property="Padding" Value="0"/>
                            <Setter Property="Margin" Value="5"/>
                        </Style>
                    </ListView.ItemContainerStyle>
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <controls:WrapPanel HorizontalAlignment="Center" />
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                </ListView>
            </StackPanel>


            <StackPanel x:Name="selectedUserPanel"  Orientation="Vertical" HorizontalAlignment="Center" Visibility="Collapsed">
                <StackPanel Orientation="Horizontal">
                    <ContentControl x:Name="userContentControl"  ContentTemplate="{StaticResource ResourceKey=userTemplate}" DataContext="{x:Bind selectedUser}"
                                Margin="0,0,20,0"/>
                    <Button x:Name="UselectUserButton" Click="UselectUserButton_Click" Height="65" Width="65" BorderBrush="Gray" BorderThickness="1"  CornerRadius="10">
                        <SymbolIcon Symbol="Clear" Foreground="Gray"/>
                    </Button>
                </StackPanel>
                <custom:PINInput x:Name="pinInput" ShowPin="False" Margin="0,20,0,0"
                                 Visibility="{x:Bind OpeningCashSet, Converter={StaticResource BoolToVisibilityConverter}, Mode=OneWay}"/>
                <StackPanel x:Name="openingCashInput" Margin="0,25,0,0" Visibility="{x:Bind showOpeningCashInput, Converter={StaticResource BoolToVisibilityConverter}, Mode=OneWay}">
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                        <TextBlock Text="Opening Cash" VerticalAlignment="Center"/>
                        <custom:KioberNumberBox Value="{x:Bind OpeningCash, Mode=TwoWay}" x:Name="numberBox" Height="50" AllowOnlyPositiveValues="True" Margin="0,0,20,0"/>
                        <Button x:Name="numberBoxButton" Click="numberBoxButton_Click"
                                Height="100" Width="100"
                                BorderBrush="{StaticResource SystemAccentColorLight3}" BorderThickness="1"  CornerRadius="20">
                            <FontIcon Glyph="&#xE72A;" FontSize="50" Foreground="Green"/>
                        </Button>
                    </StackPanel>
                    <custom:NumberPad Margin="0,30,0,0" BackSpacePressed="NumberPadBackButton_Click" buttonPressed="NumberPadButton_Click"/>
                </StackPanel>
            </StackPanel>

            <HyperlinkButton x:Name="cancelAndExitButton" Margin="0,20,0,0" HorizontalAlignment="Center" Click="cancelAndExitButton_Click"/>

        </StackPanel>
    </ScrollViewer>

</UserControl>
